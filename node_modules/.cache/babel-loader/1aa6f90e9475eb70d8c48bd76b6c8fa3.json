{"ast":null,"code":"import \"source-map-support/register\";\nimport * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport { success, failure } from \"./libs/response-lib\";\nexport async function main(event, context) {\n  const data = JSON.parse(event.body);\n  const params = {\n    TableName: \"notes\",\n    Key: {\n      userId: event.requestContext.identity.cognitoIdentityId,\n      noteId: event.pathParameters.id\n    },\n    UpdateExpression: \"SET content = :content, attachment = :attachment\",\n    ExpressionAttributeValues: {\n      \":attachment\": data.attachment || null,\n      \":content\": data.content || null\n    },\n    ReturnValues: \"ALL_NEW\"\n  };\n\n  try {\n    await dynamoDbLib.call(\"update\", params);\n    return success({\n      status: true\n    });\n  } catch (e) {\n    return failure({\n      status: false\n    });\n  }\n}","map":{"version":3,"sources":["/Users/dlabbe/Developer/nifty-notes/update.js"],"names":["dynamoDbLib","success","failure","main","event","context","data","JSON","parse","body","params","TableName","Key","userId","requestContext","identity","cognitoIdentityId","noteId","pathParameters","id","UpdateExpression","ExpressionAttributeValues","attachment","content","ReturnValues","call","status","e"],"mappings":";AAAA,OAAO,KAAKA,WAAZ,MAA6B,qBAA7B;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,qBAA/B;AAEA,OAAO,eAAeC,IAAf,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoC;AACvC,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,CAAb;AACA,QAAMC,MAAM,GAAG;AACXC,IAAAA,SAAS,EAAE,OADA;AAEXC,IAAAA,GAAG,EAAE;AACDC,MAAAA,MAAM,EAAET,KAAK,CAACU,cAAN,CAAqBC,QAArB,CAA8BC,iBADrC;AAEDC,MAAAA,MAAM,EAAEb,KAAK,CAACc,cAAN,CAAqBC;AAF5B,KAFM;AAMXC,IAAAA,gBAAgB,EAAE,kDANP;AAOXC,IAAAA,yBAAyB,EAAE;AACvB,qBAAef,IAAI,CAACgB,UAAL,IAAmB,IADX;AAEvB,kBAAYhB,IAAI,CAACiB,OAAL,IAAgB;AAFL,KAPhB;AAWXC,IAAAA,YAAY,EAAE;AAXH,GAAf;;AAcA,MAAI;AACA,UAAMxB,WAAW,CAACyB,IAAZ,CAAiB,QAAjB,EAA2Bf,MAA3B,CAAN;AACA,WAAOT,OAAO,CAAC;AAACyB,MAAAA,MAAM,EAAE;AAAT,KAAD,CAAd;AACH,GAHD,CAGE,OAAMC,CAAN,EAAS;AACP,WAAOzB,OAAO,CAAC;AAAEwB,MAAAA,MAAM,EAAE;AAAV,KAAD,CAAd;AACH;AACJ","sourcesContent":["import * as dynamoDbLib from \"./libs/dynamodb-lib\";\nimport {success, failure} from \"./libs/response-lib\";\n\nexport async function main(event, context) {\n    const data = JSON.parse(event.body);\n    const params = {\n        TableName: \"notes\",\n        Key: {\n            userId: event.requestContext.identity.cognitoIdentityId,\n            noteId: event.pathParameters.id\n        },\n        UpdateExpression: \"SET content = :content, attachment = :attachment\",\n        ExpressionAttributeValues: {\n            \":attachment\": data.attachment || null,\n            \":content\": data.content || null\n        },\n        ReturnValues: \"ALL_NEW\"\n    };\n\n    try {\n        await dynamoDbLib.call(\"update\", params);\n        return success({status: true });\n    } catch(e) {\n        return failure({ status: false });\n    }\n}"]},"metadata":{},"sourceType":"module"}
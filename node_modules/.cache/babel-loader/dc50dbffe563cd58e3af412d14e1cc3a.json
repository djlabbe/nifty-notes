{"ast":null,"code":"import \"source-map-support/register\";\nimport uuid from \"uuid\";\nimport AWS from \"aws-sdk\";\nimport { success, failure } from \"./libs/response-lib\";\nconst dynamoDb = new AWS.DynamoDB.DocumentClient();\nexport async function main(event, context, callback) {\n  const data = JSON.parse(event.body);\n  const params = {\n    TableName: \"notes\",\n    Item: {\n      userId: event.requestContext.identity.cognitoIdentityId,\n      noteId: uuid.v1(),\n      content: data.content,\n      attachment: data.attachment,\n      createdAt: Date.now()\n    }\n  };\n\n  try {\n    await dynamoDbLib.call(\"put\", params);\n    return success(params.Item);\n  } catch (e) {\n    return failure({\n      status: false\n    });\n  }\n}","map":{"version":3,"sources":["/Users/dlabbe/Developer/nifty-notes/create.js"],"names":["uuid","AWS","success","failure","dynamoDb","DynamoDB","DocumentClient","main","event","context","callback","data","JSON","parse","body","params","TableName","Item","userId","requestContext","identity","cognitoIdentityId","noteId","v1","content","attachment","createdAt","Date","now","dynamoDbLib","call","e","status"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,GAAP,MAAgB,SAAhB;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,qBAA/B;AAEA,MAAMC,QAAQ,GAAG,IAAIH,GAAG,CAACI,QAAJ,CAAaC,cAAjB,EAAjB;AAEA,OAAO,eAAeC,IAAf,CAAoBC,KAApB,EAA2BC,OAA3B,EAAoCC,QAApC,EAA8C;AACnD,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,KAAK,CAACM,IAAjB,CAAb;AAEA,QAAMC,MAAM,GAAG;AACbC,IAAAA,SAAS,EAAE,OADE;AAEbC,IAAAA,IAAI,EAAE;AACJC,MAAAA,MAAM,EAAEV,KAAK,CAACW,cAAN,CAAqBC,QAArB,CAA8BC,iBADlC;AAEJC,MAAAA,MAAM,EAAEtB,IAAI,CAACuB,EAAL,EAFJ;AAGJC,MAAAA,OAAO,EAAEb,IAAI,CAACa,OAHV;AAIJC,MAAAA,UAAU,EAAEd,IAAI,CAACc,UAJb;AAKJC,MAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL;AALP;AAFO,GAAf;;AAWA,MAAI;AACF,UAAMC,WAAW,CAACC,IAAZ,CAAiB,KAAjB,EAAwBf,MAAxB,CAAN;AACA,WAAOb,OAAO,CAACa,MAAM,CAACE,IAAR,CAAd;AACD,GAHD,CAGE,OAAOc,CAAP,EAAU;AACV,WAAO5B,OAAO,CAAC;AAAC6B,MAAAA,MAAM,EAAE;AAAT,KAAD,CAAd;AACD;AACF","sourcesContent":["import uuid from \"uuid\";\nimport AWS from \"aws-sdk\";\nimport {success, failure} from \"./libs/response-lib\";\n\nconst dynamoDb = new AWS.DynamoDB.DocumentClient();\n\nexport async function main(event, context, callback) {\n  const data = JSON.parse(event.body);\n\n  const params = {\n    TableName: \"notes\",\n    Item: {\n      userId: event.requestContext.identity.cognitoIdentityId,\n      noteId: uuid.v1(),\n      content: data.content,\n      attachment: data.attachment,\n      createdAt: Date.now()\n    }\n  };\n\n  try {\n    await dynamoDbLib.call(\"put\", params);\n    return success(params.Item);\n  } catch (e) {\n    return failure({status: false});\n  }\n}\n"]},"metadata":{},"sourceType":"module"}